# Домашняя работа № 2

## Landmarks

### Установка:
1. Скачать репозиторий на компьютер с установленным докером.
2. Порты 8080 и 5432 должны быть не заняты перед установкой.
3. Перейти в каталог проекта, затем в папку "docker".
4. Ввести в консоли команду "docker compose up".

### Реализация и ошибки:

#### Система сборки:
Ошибся, стал делать по привычке на Gradle, не увидел, что нужен Maven.

#### Liquibase:
Удалось подключить. В конфигурации Liquibase запускается до Hibernate.
В changelog.sql умышленно создается тип перечисления, и позже уничтожается.
Сделано для обучения. В конце в таблицы добавляются тестовые данные.

#### Конфигурация:
Сделал заполнение настроек из application.properties самым простым образом.
Много настроек не делал.

#### Сущности и устройство таблиц в БД:
В задаче написано, что у сущности "Населенный пункт" должны быть "Достопримечательности".
Но позже, из задачи видно, что не стоит цель получать населенный пункт в запросах.
Поэтому связь односторонняя ManyToOne, (у "Достопримечательности" один "населенный пункт").

"Достопримечательности" и "Услуги" связаны друг с другом ManyToMany.
Но реализовать связь ManyToMany я не захотел.
Видел в одном видео, что этой связи избегают.
Создана дополнительная таблица и сущность для нее ("LandmarkService").
Логика реализованна через ManyToOne и OneToMany.
Итогом этого стало то, что пришлось писать свой дефолтный метод для маппера Достопримечательностей.

#### Логгирование, Исключения, Аспекты:
Логгирование подключено, но не выполнено в полном объеме.
Не хватило времени разобраться с аспектами.
Поэтому в лог выводятся ошибки при возникновении исключений.
В лог так же не попадают ошибки при валидации, так как я не смог разобраться
какое исключение нужно перехватывать у дефолтного валидатора Spring Mvc.

#### Фильтрация:
Здесь позволил себе лишнее, сделал свой компонент для разбора фильтра.
Я понимаю, что нужно следовать тз и это ошибка, но в качестве обучения было интересно.
Так же интересно было сделать параметризированный тест.

#### OpenAPI и JavaDoc:
Не реализованно.
Про оба читал.
На JavaDoc не хватило времени.
С OpenAPI просидел день и не смог его подключить.
(Без Spring Boot он все рано должен идти с зависимостью от Spring Boot.
https://springdoc.org/v1/#how-to-integrate-open-api-3-with-spring-project-not-spring-boot)

#### Тесты, MockMVC, Testcontainers:
Не смог выполнить требование по покрытию.
Так же тесты не подвергались рефакторингу, нужно было писать более аккуратно.
Testcontainers работает.
MockMVC работает. Но не работает тестирование валидации. Не смог понять как сделать.
